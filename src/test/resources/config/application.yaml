server:
  port: 8192

management:
  security:
    enabled: ${MANAGEMENT_SECURITY_ENABLED:true}
    events:
      jwtSecret: "FakeSecret1"
      jwtExpirationInMs: 5000
    rules:
      jwtSecret: "FakeSecret2"
      jwtExpirationInMs: 5000

communication:
  searchUrl: ${SNL_RULES_URL:http://localhost:8191}/search

fact-propagation:
  subscribers:
    insert-session:
      - ${SNL_RULES_URL:http://localhost:8191}/msg?rulesDefinition=Sessions
      - ${SNL_RULES_URL:http://localhost:8191}/msg?rulesDefinition=Listings
      - ${SNL_RULES_URL:http://localhost:8191}/msg?rulesDefinition=Search
    upsert-session:
      - ${SNL_RULES_URL:http://localhost:8191}/msg?rulesDefinition=Sessions
      - ${SNL_RULES_URL:http://localhost:8191}/msg?rulesDefinition=Listings
      - ${SNL_RULES_URL:http://localhost:8191}/msg?rulesDefinition=Search
    delete-session:
      - ${SNL_RULES_URL:http://localhost:8191}/msg?rulesDefinition=Sessions
      - ${SNL_RULES_URL:http://localhost:8191}/msg?rulesDefinition=Listings
      - ${SNL_RULES_URL:http://localhost:8191}/msg?rulesDefinition=Search
    upsert-hearingPart:
      - ${SNL_RULES_URL:http://localhost:8191}/msg?rulesDefinition=Listings
    upsert-room:
      - ${SNL_RULES_URL:http://localhost:8191}/msg?rulesDefinition=Sessions
      - ${SNL_RULES_URL:http://localhost:8191}/msg?rulesDefinition=Search
    upsert-judge:
      - ${SNL_RULES_URL:http://localhost:8191}/msg?rulesDefinition=Sessions
      - ${SNL_RULES_URL:http://localhost:8191}/msg?rulesDefinition=Search
    upsert-availability:
      - ${SNL_RULES_URL:http://localhost:8191}/msg?rulesDefinition=Sessions
      - ${SNL_RULES_URL:http://localhost:8191}/msg?rulesDefinition=Search
    upsert-year:
      - ${SNL_RULES_URL:http://localhost:8191}/msg?rulesDefinition=Sessions
      - ${SNL_RULES_URL:http://localhost:8191}/msg?rulesDefinition=Listings
    upsert-month:
      - ${SNL_RULES_URL:http://localhost:8191}/msg?rulesDefinition=Sessions
      - ${SNL_RULES_URL:http://localhost:8191}/msg?rulesDefinition=Listings
    upsert-day:
      - ${SNL_RULES_URL:http://localhost:8191}/msg?rulesDefinition=Sessions
      - ${SNL_RULES_URL:http://localhost:8191}/msg?rulesDefinition=Listings
    upsert-hour:
      - ${SNL_RULES_URL:http://localhost:8191}/msg?rulesDefinition=Sessions
      - ${SNL_RULES_URL:http://localhost:8191}/msg?rulesDefinition=Listings
    upsert-minute:
      - ${SNL_RULES_URL:http://localhost:8191}/msg?rulesDefinition=Sessions
      - ${SNL_RULES_URL:http://localhost:8191}/msg?rulesDefinition=Listings

liquibase:
  enabled: true
  change-log: classpath:db/db-testdata-changelog.yaml
  drop-first: true
  user: sa
  password:

#If you use a database then uncomment below lines and update db properties accordingly leaving tomcat connection settings unchanged.
spring:
  application:
    name: snl-events-tests
  datasource:
      url: jdbc:h2:mem:db;MODE=PostgreSQL;DB_CLOSE_DELAY=-1;
      username: sa
      password:
      properties:
        charSet: UTF-8
      driver-class-name: org.h2.Driver
  jpa:
    hibernate:
      ddl-auto: validate
    properties:
      hibernate:
        dialect: uk.gov.hmcts.reform.sandl.snlevents.config.H2DbExtendedDialect
        show_sql: true
        use_sql_comments: true
        format_sql: true
#      tomcat:
#        max-active: 10
#        max-idle: 10
#        min-idle: 2
#        max-wait: 10000
#        test-on-borrow: true
#        test-on-connect: true
#        test-on-idle: true
#        validation-query: "SELECT 1"
#        time-between-eviction-runs-millis: 10000
#        test-while-idle: true
#        test-on-return: true
#        remove-abandoned: true
#        remove-abandoned-timeout: 60
#        log-abandoned: true
#        abandon-when-percentage-full: 0
